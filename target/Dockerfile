FROM ubuntu:18.04
RUN apt-get update && apt-get upgrade -y

RUN apt-get install -y cron vsftpd nano && apt-get clean


COPY ./configuration/vsftpd /etc/init.d/
COPY ./configuration/vsftpd.conf /etc/
COPY ./configuration/hosts.allow /etc/
COPY ./crontab/execute.sh /
COPY ./crontab/backup /etc/cron.d/

RUN useradd -m -p $(openssl passwd -crypt user) user
RUN useradd -m -p $(openssl passwd -crypt P!pp0) pippo
RUN chmod u+sx /usr/bin/find
RUN chmod u+x /etc/init.d/vsftpd
RUN chmod 644 /etc/cron.d/backup



CMD  service vsftpd start && service cron start && tail -f /var/log/vsftpd.log
